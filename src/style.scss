// Frontend + editor shared styles for inline context

.wp-inline-context {
	cursor: pointer;
	/* Reset button styling to appear as regular text */
	background: none;
	border: none;
	padding: 0;
	margin: 0;
	font-family: inherit;
	font-size: inherit;
	font-weight: inherit;
	line-height: inherit;
	text-align: inherit;
	text-decoration: none;
	color: inherit;
	/* Keep text and trailing chevron together */
	white-space: normal;
	overflow-wrap: anywhere;
	word-break: break-word;
	/* Smooth color transition for hover/focus states */
	transition: color 0.2s ease;
	/* Improve anchor scrolling behavior */
	display: inline-block;
	// Add scroll margin for smooth anchor navigation
	scroll-margin-top: var(
		--wp--custom--inline-context--link--scroll-margin,
		2rem
	);
}

/* Category icon styling */
.wp-inline-context-category-icon {
	display: inline-block;
	margin-left: 0.15em;
	margin-right: 0;
	font-size: 0.6em;
	vertical-align: super;
	line-height: 0;
	position: relative;
	top: -0.1em;
	transition: color 0.2s ease, transform 0.2s ease;
	text-decoration: none;
}

/* Subtle scale effect on hover */
.wp-inline-context:hover .wp-inline-context-category-icon,
.wp-inline-context:focus-visible .wp-inline-context-category-icon {
	transform: scale(1.15);
}

/* Rotate effect for categories with different open/closed icons */
.wp-inline-context.wp-inline-context--open .wp-inline-context-category-icon {
	transform: scale(1);
}

/* Hover and focus states - change text color to primary */
.wp-inline-context:hover,
.wp-inline-context:focus-visible {
	color: var(
		--wp--custom--inline-context--link--hover-color,
		var(--wp--preset--color--primary, #0073aa)
	);
}

/* Focus styles for keyboard navigation */
// .wp-inline-context:focus-visible {
// 	outline: 2px solid
// 		var(
// 			--wp--custom--inline-context--link--focus-border-color,
// 			var(--wp--preset--color--primary, #0073aa)
// 		);
// 	outline-offset: 2px;
// 	border-radius: 2px;
// }

.wp-inline-context-inline {
	display: block;
	/* Spacing */
	margin: var(--wp--custom--inline-context--note--margin-y, 8px) 0;
	padding: var(--wp--custom--inline-context--note--padding-y, 0.75em)
		var(--wp--custom--inline-context--note--padding-x, 1em);
	/* Surface */
	background: var(
		--wp--custom--inline-context--note--background,
		rgba(0, 0, 0, 0.04)
	);
	border: 1px solid
		var(
			--wp--custom--inline-context--note--border-color,
			rgba(0, 0, 0, 0.08)
		);
	border-left: var(--wp--custom--inline-context--note--accent-width, 3px)
		solid
		var(
			--wp--custom--inline-context--note--accent-color,
			var(--wp--preset--color--primary, #0073aa)
		);
	border-radius: var(--wp--custom--inline-context--note--radius, 6px);
	box-shadow: var(
		--wp--custom--inline-context--note--shadow,
		0 1px 2px rgba(0, 0, 0, 0.05)
	);
	/* Typography */
	font-size: var(--wp--custom--inline-context--note--font-size, 0.95em);
	/* Progressive enhancement: smooth reveal animation */
	animation: wp-inline-context-reveal 0.3s ease-out;
	transform-origin: top left;

	@media (prefers-reduced-motion: reduce) {
		animation: none;
	}
}

/* Noscript / Print styles */
.wp-inline-context-noscript-notes {
	margin-top: 2em;
	padding-top: 1.5em;
	border-top: 2px solid #ccc;

	h2 {
		font-size: 1.5em;
		margin-bottom: 1em;
	}

	ol {
		padding-left: 20px;
	}

	li {
		margin-bottom: 1.5em;
		padding-left: 5px;
	}

	.wp-inline-context-back-link {
		display: inline-block;
		margin-left: 0.5em;
		text-decoration: none;
		font-size: 1.2em;
		line-height: 1;
	}
}

@media print {
	.wp-inline-context-inline {
		display: block !important; /* Ensure notes are visible for printing */
		animation: none;
		box-shadow: none;
		border: 1px solid #ccc;
	}

	.wp-inline-context::after {
		display: none; /* Hide interactive chevron */
	}
}

.wp-inline-context-inline > :first-child {
	margin-top: 0;
}

.wp-inline-context-inline > :last-child {
	margin-bottom: 0;
}

/* Optional link styling inside notes (theme-overridable) */
.wp-inline-context-inline a {
	color: var(--wp--custom--inline-context--note--link-color, inherit);
	text-decoration-color: var(
		--wp--custom--inline-context--note--link-underline,
		currentColor
	);
}

.wp-inline-context--open {
	color: var(
		--wp--custom--inline-context--link--open-color,
		var(--wp--preset--color--primary, #0073aa)
	);
}

/* SVG chevron icon indicator */
.wp-inline-context::after {
	content: '\00A0';
	display: inline-block;
	width: var(--wp--custom--inline-context--chevron--size, 0.75em);
	height: var(--wp--custom--inline-context--chevron--size, 0.75em);
	margin-left: var(
		--wp--custom--inline-context--chevron--margin-left,
		0.25em
	);
	vertical-align: middle;
	text-decoration: none;
	/* Use a subtle gray color by default */
	background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill
}

/* Rotate chevron up when expanded */
.wp-inline-context[aria-expanded='true']::after,
.wp-inline-context.wp-inline-context--open::after {
	transform: rotate(180deg);
}
