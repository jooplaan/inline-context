// Frontend + editor shared styles for inline context

.wp-inline-context {
    cursor: pointer;
    /* Appear as regular text by default - no underline or color change */
    text-decoration: none;
    color: inherit;
    /* Keep text and trailing chevron together */
    white-space: nowrap;
    /* Smooth color transition for hover/focus states */
    transition: color 0.2s ease;
}

/* Hover and focus states - change text color to primary */
.wp-inline-context:hover,
.wp-inline-context:focus {
    color: var(--wp--preset--color--primary, #0073aa);
}

/* Focus styles for keyboard navigation */
.wp-inline-context:focus {
    outline: 2px solid var(--wp--preset--color--primary, #0073aa);
    outline-offset: 2px;
    border-radius: 2px;
}

.wp-inline-context-inline {
    display: block;
    /* Spacing */
    margin: var(--trybes-inline-note-margin-y, 0.75em) 0;
    padding: var(--trybes-inline-note-padding-y, 0.75em) var(--trybes-inline-note-padding-x, 1em);
    /* Surface */
    background: var(--trybes-inline-note-background, rgba(0, 0, 0, 0.04));
    border: 1px solid var(--trybes-inline-note-border-color, rgba(0, 0, 0, 0.08));
    border-left: var(--trybes-inline-note-accent-width, 3px) solid var(--trybes-inline-note-accent-color, var(--wp--preset--color--primary, #0073aa));
    border-radius: var(--trybes-inline-note-radius, 6px);
    box-shadow: var(--trybes-inline-note-shadow, 0 1px 2px rgba(0, 0, 0, 0.05));
    /* Typography */
    font-size: 0.95em;
    /* Progressive enhancement: smooth reveal animation */
    animation: wp-inline-context-reveal 0.3s ease-out;
    transform-origin: top left;
}

@keyframes wp-inline-context-reveal {
    from {
        opacity: 0;
        transform: translateY(-8px);
        max-height: 0;
        overflow: hidden;
    }
    to {
        opacity: 1;
        transform: translateY(0);
        max-height: 500px;
    }
}

/* Avoid double spacing for content inside the note */
.wp-inline-context-inline > :first-child { margin-top: 0; }
.wp-inline-context-inline > :last-child { margin-bottom: 0; }

/* Optional link styling inside notes (theme-overridable) */
.wp-inline-context-inline a {
    color: var(--trybes-inline-note-link-color, inherit);
    text-decoration-color: var(--trybes-inline-note-link-underline, currentColor);
}

.wp-inline-context--open {
    font-weight: 600;
    color: var(--wp--preset--color--primary, #0073aa);
}

/* SVG chevron icon indicator */
.wp-inline-context::after {
    content: '';
    display: inline-block;
    width: 0.75em;
    height: 0.75em;
    margin-left: 0.25em;
    vertical-align: middle;
    text-decoration: none;
    /* Use a subtle gray color by default */
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="%23666"><path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06z"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    transition: transform 0.4s ease, background-image 0.2s ease;
    opacity: 0.7;
}

/* Change chevron color on hover/focus to match primary color */
.wp-inline-context:hover::after,
.wp-inline-context:focus::after {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="%230073aa"><path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06z"/></svg>');
    opacity: 1;
}

/* Rotate chevron up when expanded */
.wp-inline-context[aria-expanded="true"]::after,
.wp-inline-context.wp-inline-context--open::after {
    transform: rotate(180deg);
}
